# RESEND_API_KEY: "/$PROJECT_NAME/$ENV/resend-api-key"

version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo Installing dependencies...
        - cd frontend
        - npm ci
    build:
      commands:
        - echo Build started on `date`
        - echo Compiling code
        - node -v
        - echo "AWS App ID: $AWS_APP_ID"
        - echo "AWS Branch: $AWS_BRANCH"
        - export RESEND_API_KEY=$(aws ssm get-parameter --name /amplify/$AWS_APP_ID/$AWS_BRANCH/RESEND_KEY --with-decryption --query "Parameter.Value" --output text)
        - npm run build
  artifacts:
    baseDirectory: frontend/.next
    files:
      - "**/*"
  cache:
    paths:
      - node_modules/**/*
